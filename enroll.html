<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enroll | XenZ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <style>
        :root{ --bg:#050b1e; --glass:rgba(13,22,54,.88); --accent:#4dd6ff; --muted:#b7c0ff; }
        *{margin:0;padding:0;box-sizing:border-box}
        body{ background:linear-gradient(180deg,#050b1e,#0d1636); color:#fff; font-family:Poppins,sans-serif; min-height:100vh; display:flex; flex-direction:column; overflow-x:hidden; }
        #snowCanvas{ position:fixed; inset:0; pointer-events:none; z-index:0; }
        header{ position:sticky; top:0; z-index:5; background:rgba(5,11,30,.85); backdrop-filter:blur(12px); border-bottom:1px solid #1f2a55; }
        .container{ max-width:1200px; margin:auto; padding:10px 20px; display:flex; align-items:center; justify-content:space-between; }
        .logo img{height:50px}
        main{ flex:1; display:flex; justify-content:center; align-items:center; padding:50px 15px; position:relative; z-index:2; }
        .card{ width:100%; max-width:400px; padding:32px; border-radius:22px; background:var(--glass); backdrop-filter:blur(16px); box-shadow:0 25px 60px rgba(0,0,0,.6); }
        h3{text-align:center; margin-bottom:20px; color: var(--accent);}
        label{ font-size:13px; color:var(--muted); margin-top:12px; display:block; }
        input{ width:100%; height:45px; margin-top:8px; border-radius:10px; border:1px solid #303f6d; padding:0 12px; background:#1a2544; color:#fff; }
        .price-tag{ text-align:center; margin:20px 0; font-size:24px; font-weight:700; color:#fff; }
        .pay-btn-main { width: 100%; padding: 15px; border-radius: 12px; border: none; background: var(--accent); color: #000; font-weight: 700; cursor: pointer; font-size: 16px; transition: 0.3s; }
        .pay-btn-main:hover { transform: translateY(-2px); opacity: 0.9; }
        #meetSection{ display:none; text-align:center; background:#0f1a3a; padding:20px; border-radius:16px; border:2px dashed var(--accent); margin-top:18px; }
        .meet-link{ display:inline-block; padding:12px 26px; background:var(--accent); color:#000; text-decoration:none; border-radius:30px; font-weight:700; margin-top:10px; }
    </style>
</head>
<body>

<canvas id="snowCanvas"></canvas>

<header>
    <div class="container">
        <div class="logo"><img src="../frontend/frontend/xzt.png" alt="XenZ"></div>
    </div>
</header>

<main>
    <div class="card" id="enrollCard">
        <h3>Live AI Training</h3>
        
        <label>Full Name</label>
        <input type="text" id="userName" placeholder="Enter your name">

        <label>Mobile Number</label>
        <input type="tel" id="userMobile" maxlength="10" placeholder="10 Digit Mobile">

        <label>Gmail ID</label>
        <input type="email" id="userEmail" placeholder="example@gmail.com">

        <div class="price-tag">Total: â‚¹37</div>

        <button class="pay-btn-main" onclick="initiateRazorpay()">Pay Securely & Get Link</button>

        <div id="meetSection">
            <h4 style="color: #4dfa6d;">Payment Verified! ðŸŽ‰</h4>
            <p style="font-size: 12px; margin: 10px 0;">Your transaction ID: <span id="transId"></span></p>
            <a href="https://meet.google.com/abc-defg-hij" class="meet-link">Join Google Meet</a>
        </div>
    </div>
</main>

<script>
    // 1. RAZORPAY CONFIGURATION
    function initiateRazorpay() {
        const name = document.getElementById('userName').value;
        const mobile = document.getElementById('userMobile').value;
        const email = document.getElementById('userEmail').value;

        if(!name || mobile.length < 10 || !email.includes("@")) {
            alert("Please provide valid details to continue.");
            return;
        }

        var options = {
            "key": "YOUR_RAZORPAY_KEY_ID", // Get this from Razorpay Dashboard
            "amount": "3700", // Amount is in currency subunits (3700 paise = â‚¹37)
            "currency": "INR",
            "name": "XenZ Technologies",
            "description": "AI Training Enrollment",
            "image": "../frontend/frontend/xzt.png",
            "handler": function (response){
                // THIS FUNCTION RUNS ONLY IF PAYMENT IS SUCCESSFUL
                handleSuccess(response.razorpay_payment_id);
            },
            "prefill": {
                "name": name,
                "email": email,
                "contact": mobile
            },
            "theme": { "color": "#4dd6ff" }
        };

        var rzp1 = new Razorpay(options);
        rzp1.on('payment.failed', function (response){
            alert("Payment Failed: " + response.error.description);
        });
        rzp1.open();
    }

    // 2. SUCCESS UI HANDLER
    function handleSuccess(paymentId) {
        // Hide inputs
        document.querySelectorAll('label, input, .price-tag, .pay-btn-main').forEach(el => el.style.display = 'none');
        
        // Show Meet Link
        const meetSection = document.getElementById('meetSection');
        document.getElementById('transId').innerText = paymentId;
        meetSection.style.display = "block";
        
        // In a real app, you would also send 'paymentId' to your server here to save it.
        console.log("Secure Payment Verified: " + paymentId);
    }

    // --- Background Snow Animation (Your Original) ---
    const c=document.getElementById("snowCanvas"),x=c.getContext("2d");
    let w,h,f=[];
    function init(){
        w=c.width=innerWidth; h=c.height=innerHeight;
        f=[...Array(120)].map(()=>({ x:Math.random()*w, y:Math.random()*h, r:Math.random()*2+1, s:Math.random()*1.5+.5, o:Math.random()*.5+.3 }));
    }
    function snow(){
        x.clearRect(0,0,w,h);
        f.forEach(a=>{ x.fillStyle=`rgba(255,255,255,${a.o})`; x.beginPath(); x.arc(a.x,a.y,a.r,0,Math.PI*2); x.fill(); a.y+=a.s; if(a.y>h)a.y=-5; });
        requestAnimationFrame(snow);
    }
    addEventListener("resize",init);
    init(); snow();
</script>
</body>
</html>